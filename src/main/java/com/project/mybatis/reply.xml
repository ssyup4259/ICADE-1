<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.project.mybatis.replyMapper">

<!-- GoodsNum의 최댓값 -->
<select id="replyMaxNum" resultType="int">
	select nvl(max(BC_NUM), 0) from board_comment
</select>

<insert id="insertData" parameterType="com.project.dto.BoardCommentDTO">
insert into board_comment(BC_NUM,BC_BOARD,BC_ID,BC_DATE,BC_PARENT,BC_CONTENT,BC_IMAGE) 
values(#{BC_NUM},#{BC_BOARD},#{BC_ID},sysdate,#{BC_PARENT},#{BC_CONTENT},#{BC_IMAGE})
</insert>

<!-- 댓글 리스트 -->
<select id="listData" parameterType="hashMap" resultType="com.project.dto.BoardCommentDTO" >
	select * from (
	select rownum rnum, data.* from (
	select BC_NUM,BC_BOARD,BC_ID,BC_DATE,BC_PARENT,BC_CONTENT,BC_IMAGE
	from board_comment where BC_ID =#{BC_ID} order by BC_DATE asc) data)
<![CDATA[
	where rnum >= #{start} and rnum <= #{end}
]]>

</select>

<!-- 하나의 데이터 읽어오기 -->
<select id="readData" parameterType="String" resultType="com.project.dto.BoardCommentDTO">
select BC_NUM,BC_BOARD,BC_ID,BC_DATE,BC_PARENT,BC_CONTENT,BC_IMAGE from board_comment where BC_ID = #{BC_ID} AND BC_PARENT = #{BC_PARENT}
</select>

<update id="updateData" parameterType="String">
update board_comment set BC_DATE = sysdate,BC_CONTENT =#{BC_CONTENT},BC_IMAGE =#{BC_IMAGE} where BC_ID =#{BC_ID}
</update>

<delete id="deleteData" parameterType="String">
delete board_comment where BC_NUM =#{BC_NUM}
</delete>

</mapper>